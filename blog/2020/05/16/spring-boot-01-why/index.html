<!DOCTYPE html>

<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="zh">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
<!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>spring boot系列 1.1 为什么需要spring boot | lzxZz&#39;s Blog</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="spring boot系列 1.1 为什么需要spring boot" />
<meta name="author" content="lzxZz" />
<meta property="og:locale" content="zh" />
<meta name="description" content="The first &#39;Hello world&#39; post for Simple Texture theme." />
<meta property="og:description" content="The first &#39;Hello world&#39; post for Simple Texture theme." />
<meta property="og:site_name" content="lzxZz&#39;s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-16T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"The first &#39;Hello world&#39; post for Simple Texture theme.","author":{"@type":"Person","name":"lzxZz"},"@type":"BlogPosting","url":"/blog/2020/05/16/spring-boot-01-why/","headline":"spring boot系列 1.1 为什么需要spring boot","dateModified":"2020-05-16T00:00:00+08:00","datePublished":"2020-05-16T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/2020/05/16/spring-boot-01-why/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<meta name="keywords" content="spring boot,教程,java,jawa" />





<link type="application/atom+xml" rel="alternate" href="/feed.xml" title="lzxZz's Blog" />
    <link href='/assets/stylesheets/blog.css' rel="stylesheet" type="text/css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
<script>window.Modernizr || document.write('<script src="/assets/javascripts/modernizr-2.8.3.min.js"><\/script>')</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="/assets/javascripts/jquery-3.3.1.min.js"><\/script>')
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
<script>
    window.Pace || document.write('<script src="/assets/javascripts/pace.min.js"><\/script>')
</script>

    
</head>

<body>
    

    <!--[if IE]>
    <p class="site-notice">您正在使用一个过时的网页浏览器。请<a href="http://browsehappy.com/" target="_blank">升级您的浏览器</a>或<a href="http://www.google.com/chromeframe/?redirect=true" target="_blank">开启 Google Chrome Frame</a> 来提高用户体验。</p>
<![endif]-->
<noscript>
    <p class="site-notice">本网站需要 JavaScript。请查阅指南来<a href="http://www.enable-javascript.com/" target="_blank">给您的浏览器开启 JavaScript 功能</a>。</p>
</noscript>

    <div class="nav-wrapper overlay-wrapper">
    <div class="nav-form overlay-form">
        <span class="overlay-header menu">菜单</span>
        <a class="btn-close">关闭</a>
        <div class="results">
            <ul>
                <li><a href="/blog/categories/">文章分类</a></li>
                <li><a href="/blog/tags/">文章标签</a></li>
                <li><a href="/">关于</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="search-wrapper overlay-wrapper">
    <div class="search-form overlay-form">
        <input type="text" class="overlay-header search-field" placeholder="搜索...">
        <a class="btn-close">关闭</a>
        <ul class="results"></ul>
    </div>
</div>


    <div id="page" class="hentry">
        <header class="the-header">
    <div class="unit-head">
        <div class="unit-inner unit-head-inner">
            <nav class="nav-global">
                <ul>
                    <li class="logo nav-link">
                        <button class="btn-menu" title="菜单"></button>
                        <a href="/blog/">lzxZz's Blog</a>
                        <!--[if !IE]> -->
                        <button class="btn-search" title="搜索"></button>
                        <!-- <![endif]-->
                    </li>
                    <li class="nav-link"><a title="文章分类" href="/blog/categories/">文章分类</a></li>
                    <li class="nav-link"><a title="文章标签" href="/blog/tags/">文章标签</a></li>
                    <!--[if !IE]> -->
                    <li class="nav-link"><a title="搜索" class="btn-search" href="#">搜索</a></li>
                    <!-- <![endif]-->
                </ul>
            </nav>
        </div>
    </div>
</header>


        <div class="body animated fadeInDown" role="main">
            <div class="unit-body">
                <div class="unit-inner unit-body-inner">
                    <div class="entry-content">
                        <article class="unit-article layout-post">
    <div class="unit-inner unit-article-inner">
        <div itemscope itemtype="http://schema.org/Article" class="content">
            <header>
                <div class="unit-head">
                    <div class="unit-inner unit-head-inner">
                        <h1 class="entry-title" itemprop="name">spring boot系列   1.1 为什么需要spring boot</h1>
                    </div>
                </div>
            </header>
            <div class="bd article-content">
                <div class="entry-content">
                    <div class="meta">
                        <p class="date-publish">
                            发表信息:
                            <time itemprop="datePublished" class="date-pub "
                                title="2020-05-16T00:00:00+08:00" datetime="2020-05-16T00:00:00+08:00">May 16, 2020 </time>
                            by
                            <a class="author" href="/" rel="author" title="显示作者">
                                <span itemprop="author" itemscope itemtype="http://schema.org/Person">
                                    <span itemprop="name">lzxZz</span>
                                </span>
                            </a>



                           

                            
                                <a class="license-icon" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" title="显示许可证">
                                    <img alt="Creative Commons Licence" style="border-width:0" src="/assets/images/theme/cc-by-sa.png"  height="16" width="80"/>
                                </a>
                            
                            
                                (最后更新于:
                                <time class="date-updated updated" title="2020-05-16T00:00:00+08:00" datetime="2020-05-16T00:00:00+08:00">2020-05-16</time>)
                            
                        </p>
                        <ul class="list-category list-linear">
                            <li class="list-head">文章分类: </li>
                             
     
        <li>
            <a href="/blog/categories/#spring-boot" title="spring boot">
            spring boot <span>1</span></a>
        </li>
    



                        </ul>
                        <ul class="list-tag list-linear">
                            <li class="list-head">文章标签: </li>
                             
    
        
        <li>
            <a href="/blog/tags/#java" title="java">java <span>1</span></a>
        </li>
    
        
        <li>
            <a href="/blog/tags/#jawa" title="jawa">jawa <span>1</span></a>
        </li>
    
        
        <li>
            <a href="/blog/tags/#spring-boot" title="spring boot">spring boot <span>1</span></a>
        </li>
    
        
        <li>
            <a href="/blog/tags/#教程" title="教程">教程 <span>1</span></a>
        </li>
    




                        </ul>
                        <span>
                            本文共有
                            4880
                            字
                        </span>
                    </div>

                
                
                    <div itemprop="articleBody">
                        <h1 id="heading-为什么需要spring-boot">为什么需要spring boot</h1>

<p>spring boot诞生的原因十分的简单, 就是一句话<strong>天下苦spring久矣</strong>.</p>

<p>spring框架无疑是一款优秀的框架, 统治了java后端绝大多数的应用场景. 但是spring也存在一个致命的问题:<strong>配置繁重</strong></p>

<p>就算是使用spring mvc+spring开发一个hello world的web后端程序, 其配置极其繁重.</p>

<p>步骤如下:</p>
<ol>
  <li>首先是使用<code class="highlighter-rouge">maven</code>创建一个web项目.</li>
  <li>然后引入对应的<code class="highlighter-rouge">spring</code>和<code class="highlighter-rouge">spring mvc</code>的依赖.</li>
  <li>在<code class="highlighter-rouge">/META-INF/web.xml</code>中配置前端处理器<code class="highlighter-rouge">DispatcherServlet</code>, 接管对应请求</li>
  <li>编写控制器类并使用注解将控制器加入到IOC容器中</li>
  <li>编写处理方法, 并使用<code class="highlighter-rouge">@RequestMapping</code>映射请求</li>
  <li>编写<code class="highlighter-rouge">springmvc.xml</code>配置文件, 配置<code class="highlighter-rouge">&lt;context:component-scan base-package=".com.study.hello"&gt;&lt;/context:component-scan&gt;</code>启动包扫描, 来扫描到控制器</li>
  <li>启动mvc的注解驱动<code class="highlighter-rouge">&lt;mvc:annotation-driven/&gt;</code></li>
  <li>将<code class="highlighter-rouge">springmvc.xml</code>添加到<code class="highlighter-rouge">web.xml</code>的启动参数中, 来加载配置.</li>
  <li>编译程序并打war包</li>
  <li>将war包部署到tomcat等服务器中的webapps目录下</li>
  <li>启动tomcat服务器</li>
</ol>

<p>完成了上述步骤之后, 一个hello world的程序才能够运行.</p>

<p>而在实际开发中, 配置远多于这个hello world程序.</p>

<p>但是spring boot诞生之后, 使用spring boot开发hello world程序就简单多了. 步骤如下:</p>

<ol>
  <li>创建一个spring boot项目, 导入web的starter(使用IDE创建的时候能够直接选择)</li>
  <li>创建一个控制器类, 使用注解将控制器加入到IOC容器中
 需要注意的是. spring boot默认只会扫描<code class="highlighter-rouge">Application.java</code>所在包及其自包下的类</li>
  <li>编写处理方法, 使用<code class="highlighter-rouge">@RequestMapping</code>映射请求</li>
  <li>将项目作为一个普通java项目,编译运行</li>
</ol>

<p>可以看到这一个项目并不需要我们做任何的配置, 也不需要tomcat等服务器参与.</p>

<p>下面就介绍一下什么是spring boot, 他是怎么做到这一切的.</p>

<h1 id="heading-什么是spring-boot-以及spring-boot的优缺点在哪">什么是spring boot, 以及spring boot的优缺点在哪?</h1>
<p>下面是wiki上对spring boot的介绍.</p>
<blockquote>
  <p>Spring Boot is Spring's convention-over-configuration solution for creating stand-alone, production-grade Spring-based Applications that you can "just run".[23] It is preconfigured with the Spring team's "opinionated view" of the best configuration and use of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need very little Spring configuration. Features:</p>
  <ul>
    <li>Create stand-alone Spring applications</li>
    <li>Embed Tomcat or Jetty directly (no need to deploy WAR files)</li>
    <li>Provide opinionated 'starter' Project Object Models (POMs) to simplify your Maven configuration</li>
    <li>Automatically configure Spring whenever possible</li>
    <li>Provide production-ready features such as metrics, health checks and externalized configuration</li>
    <li>Absolutely no code generation and no requirement for XML configuration.</li>
  </ul>
</blockquote>

<p>spring boot是对Spring的一个封装, spring团队预先配置了"最佳属性"的基于约定的配置解决方案.用于创建可以直接运行的,独立的,生产级别的基于spring的应用程序.(并非对wiki的翻译).</p>

<p>简单说, spring boot就是许多套面向不同应用场景的配置解决方案. spring团队面对不同场景做了一些预先的配置.</p>

<p>spring boot的特点如下:</p>
<ol>
  <li>独立的spring应用程序</li>
  <li>直接嵌入了tomcat或jetty等服务器, 不需要使用war包部署</li>
  <li>提供了一些<code class="highlighter-rouge">starter</code>maven依赖, 来简化maven配置.</li>
  <li>尽可能的自动配置spring</li>
  <li>提供了生产功能,<code class="highlighter-rouge"> metrics, health checks,externalized configuration</code></li>
  <li>没有代码生成, 不需要xml配置.</li>
</ol>

<p>简单点说spring boot就是提供了"一把梭"的解决方案. 创建项目, 编写业务逻辑, 运行项目.</p>

<p>spring boot的缺点也十分明显,</p>
<ol>
  <li>首先就是笨重. spring框架本来就算是一个比较笨重的框架. 而spring boot的自动配置更加加剧了这一现象.
 <em>spring boot的自动配置在了解了其内部机制之后, 许多不需要的组件是可以不加载的</em></li>
  <li>其二就是黑盒, 由于一切都自动化了, 新手在遇到框架出了问题的时候很难找到问题取修复. 
 众所周知, 目前的代码的结构都在趋向于小函数的调用, 这无疑加深了调用栈, 让理解代码变得弯弯绕绕.</li>
</ol>

<p>上述缺点是我从一个初学者出发的思考, 也参考了一些网络上的看法.</p>

<p>spring boot是什么, 重点关注starter即可. 这些starter就是spring boot提供的预先配置的场景. 下图是<code class="highlighter-rouge">spring-boot-web-starter</code>的依赖图:
<img src="/images/springboot-webstarter.png" alt="" />
图中从左往有的依赖分别是:</p>
<ol>
  <li>嵌入式<code class="highlighter-rouge">tomcat</code>服务器</li>
  <li>处理json的依赖库</li>
  <li>spring-boot-stater
 其中包含了对日志的依赖<code class="highlighter-rouge">spring-boot-starter-logging</code>和处理yaml文件的<code class="highlighter-rouge">snakeyaml</code>, 以及spring boot的自动配置包</li>
  <li>数据校验的依赖</li>
  <li><code class="highlighter-rouge">spring web</code>和<code class="highlighter-rouge">spring webmvc</code>以及<code class="highlighter-rouge">spring</code>框架本身的依赖.</li>
</ol>

<p>其中spring boot的所有的自动化都是源于一个注解,<code class="highlighter-rouge">@SpringBootApplication</code>, 详细内容这里不做叙述. 需要注意的是, 所有的自动配置的操作, 全部在这个包中可以找到.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">org.springframework.boot.autoconfigure</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.lang.annotation.Documented</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.annotation.ElementType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.annotation.Inherited</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.annotation.Retention</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.annotation.RetentionPolicy</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.annotation.Target</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.SpringBootConfiguration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.context.TypeExcludeFilter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ComponentScan</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.FilterType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ComponentScan.Filter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.annotation.AliasFor</span><span class="o">;</span>

<span class="nd">@Target</span><span class="o">({</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">})</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="nd">@Inherited</span>
<span class="nd">@SpringBootConfiguration</span>
<span class="nd">@EnableAutoConfiguration</span>
<span class="nd">@ComponentScan</span><span class="o">(</span>
    <span class="n">excludeFilters</span> <span class="o">=</span> <span class="o">{</span><span class="nd">@Filter</span><span class="o">(</span>
    <span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">CUSTOM</span><span class="o">,</span>
    <span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">TypeExcludeFilter</span><span class="o">.</span><span class="na">class</span><span class="o">}</span>
<span class="o">),</span> <span class="nd">@Filter</span><span class="o">(</span>
    <span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">CUSTOM</span><span class="o">,</span>
    <span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">AutoConfigurationExcludeFilter</span><span class="o">.</span><span class="na">class</span><span class="o">}</span>
<span class="o">)}</span>
<span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">SpringBootApplication</span> <span class="o">{</span>

</code></pre></div></div>

<p>至于spring boot的可配置内容, 建议在文档中查找, 而不是翻阅源码, <a href="https://docs.spring.io/spring-boot/docs/2.3.0.RELEASE/reference/html/appendix-application-properties.html">文档地址</a></p>

<h1 id="heading-3-如何使用spring-boot">3. 如何使用spring boot</h1>
<p><strong>注意: spring boot只是简化了spring的配置, 如果需要使用spring boot开发web系统, 那么spring和spring mvc的知识一样需要掌握</strong></p>
<blockquote>
  <p>耦合只能从一个地方移动到另一个地方, 并不能完全消除
spring boot的自动配置只是为一些配置项提供了常见的值, 并没有消除这些配置.</p>
</blockquote>

<p>本章介绍的内容有:</p>
<ol>
  <li>spring boot项目的创建, 基于IDEA</li>
  <li>如何编写一个简单的Hello  World程序.</li>
</ol>

<h2 id="heading-31-idea中spring-boot项目的创建">3.1 IDEA中spring boot项目的创建.</h2>

<p>首先启动IDEA, 并点击新建项目,如下图所示:</p>

<p><img src="/images/springboot-create1.png" alt="" /></p>

<p>在左侧选中<code class="highlighter-rouge">spring Initializr</code>, 在右侧选择对应的jdk版本, 初始化服务器url选择默认的<code class="highlighter-rouge">start.spring.io</code>即可, 点击next, 如下图所示:</p>

<p><img src="/images/springboot-create2.png" alt="" /></p>

<p>然后就是创建maven项目的一些id的输入. 这里自己设置即可. 我这里暂时不设置. 然后点击next, 如下图所示:</p>

<p><img src="/images/springboot-create3.png" alt="" /></p>

<p>这里就是勾选spring boot的依赖项, 这里选中的依赖会自动的导入<code class="highlighter-rouge">pom.xml</code>中</p>

<p>最上方有一个搜索框用于搜索依赖, 右边是spring boot的版本选择,</p>

<p>左边的框中是spring boot的依赖分类, 中间是对应分类中的依赖.</p>

<p>最右边显示的是选中的依赖. 依赖选择完毕之后,点击next, 结果如下图所示:</p>

<p><img src="/images/springboot-create4.png" alt="" /></p>

<p>填写项目的名称和项目的地址, 然后点击finish就完成了项目的创建.
下面有一些高级设置, 一般不建议修改.</p>

<p>创建好的项目如下图所示:</p>

<p><img src="/images/springboot-create5.png" alt="" /></p>

<p>创建了两个文件,</p>
<ol>
  <li><code class="highlighter-rouge">DemoApplication.java</code>
 这是spring boot的主配置类文件</li>
  <li><code class="highlighter-rouge">application.properties</code>
 spring boot的配置文件</li>
</ol>

<p>目前项目就能够直接运行了, IDEA中运行项目这里就不介绍了. 但是项目运行之后什么都没有, 就是一个空壳, 下面我们编写一个控制器, 写一个<code class="highlighter-rouge">localhost:8080/hello</code>接口.代码如下:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.example.demo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ResponseBody</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloController</span> <span class="o">{</span>

    <span class="nd">@ResponseBody</span>
    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"hello"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">hello</span><span class="o">(){</span>
        <span class="k">return</span> <span class="s">"hello"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>至此, 使用spring boot开发一个项目的内容就全部结束了</p>

                    </div>
                </div>
            </div>
            <footer class="unit-foot">
                <div class="unit-inner unit-foot-inner">
                    <div class="post-buttons">
                        <a class="internal gotop" href="#page" title="返回顶部">返回顶部</a>
                        
                    </div>
                    <nav class="pagination">
                        
                            <a class="internal" rel="prev" href="/blog/2020/05/04/time-manager/" title="上一篇 'lzxZz的时间管理秘籍'"> ← lzxZz的时间管理秘籍</a>
                        
                        
                            <a class="internal" rel="next" href="/blog/2020/05/16/spring-boot-overview/" title="下一篇 'Spring Boot Overview'">Spring Boot Overview → </a>
                        
                    </nav>
                </div>
            </footer>
            <div class="misc-content">
                
            </div>
        </div>
    </div>
</article>

                    </div>
                </div>
            </div>
        </div>
        <footer class="the-footer">
    <div class="unit-foot">
        <div class="unit-inner unit-foot-inner">
            <div class="misc vcard">
                <div class="about">
                    <h4><a href="/">关于</a></h4>
                    
                        <p>野兽屈服于本能, 人类受控于理智<br>Beasts succumb to instinct, humans are controlled by mind</p>
                    
                    <p><small>本博客主题 <a href="https://github.com/yizeng/jekyll-theme-simple-texture" target="_blank">Simple Texture</a> 由 <a href="https://yizeng.me" target="_blank">Yi Zeng</a> 基于 <a href="https://jekyllrb.com/" target="_blank">Jekyll</a> 开发.</small></p>
                </div>
                
                <div class="social-links">
                    
                    <a class="ico-rss" href="/feed.xml" rel="me" target="_blank" title="feed"></a>
                    
                        
                    
                        
                            <a class="ico-github" href="https://github.com/lzxZz" rel="me" target="_blank" title="github"></a>
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                </div>
            </div>
        </div>
    </div>
    <a href="#" class="internal back-to-top">返回顶部</a>
</footer>

    </div>

    <script>
$(document).ready(function () {
    var offset = 50,
        duration = 500,
        width = 960;
    $(window).scroll(function () {
        if ($(window).width() > width) {
            if ($(this).scrollTop() > offset) {
                $('footer').css('top', '20px');
                $('footer .back-to-top').fadeIn(duration);
            } else {
                $('footer').css('top', 'auto');
                $('footer .back-to-top').fadeOut(duration);
            }
        }
    });
    $(window).resize(function () {
        if ($(window).width() < width) {
            $('footer').css('top', 'auto');
            $('footer .back-to-top').fadeOut(duration);
        }
        if ($(window).width() >= width && $(this).scrollTop() > offset) {
            $('footer').css('top', '20px');
            $('footer .back-to-top').fadeIn(duration);
        }
    });

    $('footer .back-to-top, .gotop').on('click', function (event) {
        event.preventDefault();
        $('html, body').animate({
            scrollTop: 0
        }, duration);
        return false;
    });

    $('.show-hidden').on('click', function () {
        $(this).parent().next().toggleClass("hidden");
        $(this).toggleClass("hidden");
    });
});
</script>

<!-- Show menu overlay + Jekyll Simple Search option -->
<script src="/assets/javascripts/jekyll-search.jquery.js"></script>
<script>
$(document).ready(function () {
    $('.search-field').simpleJekyllSearch({
      jsonFile: '/search.json',
      template: '<li><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></li>',
      searchResults: '.search-wrapper .results',
      searchResultsTitle: '<h4>搜索结果</h4>',
      noResults: '<p>啊哈<br/><small>什么也没找到 :(</small></p>'
    });
});

(function ($, window, undefined) {
    var closeOverlay = function () {
        $('.nav-wrapper, .search-wrapper').removeAttr('style');
        $(".nav-form, .search-form").removeClass('active');
        $("body").removeClass('nav-overlay search-overlay');
    };

    $('.nav-global .btn-search').on('click', function () {
        $('.search-wrapper').css({display: "block"});
        $(".search-form").addClass('active');
        $(".search-form").find('input').focus();
        $("body").addClass('search-overlay');
    });

    $('.nav-global .btn-menu').on('click', function () {
        $('.nav-wrapper').css({display: "block"});
        $(".nav-form").addClass('active');
        $(".nav-form .search-field").prop('disabled', true);
        $("body").addClass('nav-overlay');
    });

    $('.nav-wrapper .btn-close, .search-wrapper .btn-close').on('click', function () {
        closeOverlay();
    });

    $(document).on('keyup', function (e) {
        if (e.keyCode === 27) {
            closeOverlay();
        }
    });
})(jQuery, window);
</script>

<script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-buttons.min.js'></script>
<script src="/assets/javascripts/unveil/jquery.unveil.min.js"></script>

<script>
    window.jQuery.fancybox || document.write('<script src="/assets/javascripts/fancybox/jquery.fancybox.pack.js?v=2.1.4"><\/script>')
    window.jQuery.fancybox.helpers.buttons || document.write('<script src="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"><\/script>')
</script>

<script>
    $("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/jquery.fancybox.css?v=2.1.4" type="text/css" />');
    $("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" />');
    $(".post-image").fancybox({
        prevEffect: 'none',
        nextEffect: 'none',
        closeBtn: true,
        helpers: {
            title: {
                type: 'float'
            }
        }
    });
    $(document).ready(function () {
        $(".post-image > img").unveil(450);
    });
</script>

</body>

</html>